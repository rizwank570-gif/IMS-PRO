<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEDLOG - Enterprise Healthcare Logistics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .modal-overlay { background-color: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- Inline SVG Icons to prevent library errors ---
        const Icons = {
            Boxes: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m7.5 4.27 9 5.15"/><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></svg>,
            LayoutGrid: ({size=18}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg>,
            Database: ({size=18}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M3 5V19A9 3 0 0 0 21 19V5"/><path d="M3 12A9 3 0 0 0 21 12"/></svg>,
            Package: ({size=18, className}) => <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m7.5 4.27 9 5.15"/><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></svg>,
            ArrowDownCircle: ({size=18}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><path d="m8 12 4 4 4-4"/><path d="M12 8v8"/></svg>,
            ExternalLink: ({size=18}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>,
            Building2: ({size=18, className}) => <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"/><path d="M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2"/><path d="M10 6h4"/><path d="M10 10h4"/><path d="M10 14h4"/><path d="M10 18h4"/></svg>,
            History: ({size=18}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M12 7v5l4 2"/></svg>,
            Search: ({size=18, className}) => <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
            AlertTriangle: ({size=18, className}) => <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4.17 21h15.66a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg>,
            ChevronRight: ({size=18}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m9 18 6-6-6-6"/></svg>,
            X: ({size=18}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        };

        const INITIAL_MASTER_LIST = [
            { id: 'm-1', name: 'Complete Kits', category: 'Kits', basePrice: 1200, unit: 'Kit' },
            { id: 'm-2', name: 'Complete Kits without Container', category: 'Kits', basePrice: 950, unit: 'Kit' },
            { id: 'm-3', name: 'Kits (Sst & Edta)', category: 'Kits', basePrice: 450, unit: 'Kit' },
            { id: 'm-4', name: 'Band-Aid', category: 'Medical Supplies', basePrice: 5, unit: 'Box' },
            { id: 'm-5', name: 'Blood Ziplock', category: 'Supplies', basePrice: 12, unit: 'Pack' },
            { id: 'm-10', name: 'Gloves', category: 'Safety', basePrice: 350, unit: 'Box' },
            { id: 'm-15', name: 'Mask', category: 'Safety', basePrice: 10, unit: 'Pc' },
            { id: 'm-20', name: 'Sst Vial', category: 'Vials', basePrice: 50, unit: 'Unit' }
        ];

        const App = () => {
            const [view, setView] = useState('dashboard');
            const [masterItems] = useState(INITIAL_MASTER_LIST);
            const [hubs] = useState([
                { id: 'h1', name: 'Mumbai Main Hub', location: 'Mumbai', capacity: '85%' },
                { id: 'h2', name: 'Delhi North Hub', location: 'Delhi', capacity: '40%' },
                { id: 'h3', name: 'Bangalore South Hub', location: 'Bangalore', capacity: '25%' },
            ]);

            const [products, setProducts] = useState(
                INITIAL_MASTER_LIST.map((m, index) => ({
                    id: `p-${index}`,
                    masterId: m.id,
                    name: m.name,
                    category: m.category,
                    price: m.basePrice,
                    stock: index < 3 ? 500 : 15,
                    minStock: 20,
                    hubId: index % 3 === 0 ? 'h1' : index % 3 === 1 ? 'h2' : 'h3'
                }))
            );

            const [isIntakeModalOpen, setIsIntakeModalOpen] = useState(false);
            const [isReleaseModalOpen, setIsReleaseModalOpen] = useState(false);
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedHubFilter, setSelectedHubFilter] = useState('all');

            const [intakeForm, setIntakeForm] = useState({ invoiceNo: '', vendorId: '', destinationHubId: 'h1' });
            const [intakeCart, setIntakeCart] = useState([]);
            const [tempIntakeItem, setTempIntakeItem] = useState({ masterId: '', qty: 1 });

            const stats = useMemo(() => {
                const totalItems = products.reduce((acc, curr) => acc + Number(curr.stock), 0);
                const lowStockItems = products.filter(p => p.stock <= p.minStock).length;
                return { totalItems, lowStockItems };
            }, [products]);

            const filteredItems = useMemo(() => {
                return products.filter(p => {
                    const matchesSearch = p.name.toLowerCase().includes(searchTerm.toLowerCase());
                    const matchesHub = selectedHubFilter === 'all' || p.hubId === selectedHubFilter;
                    return matchesSearch && matchesHub;
                });
            }, [products, searchTerm, selectedHubFilter]);

            const submitIntake = () => {
                if (intakeCart.length === 0) return;
                const newProducts = [...products];
                intakeCart.forEach(item => {
                    const existing = newProducts.find(p => p.masterId === item.id && p.hubId === intakeForm.destinationHubId);
                    if (existing) {
                        existing.stock += item.qty;
                    } else {
                        newProducts.push({
                            id: Math.random().toString(36).substr(2, 9),
                            masterId: item.id, name: item.name, category: item.category,
                            price: item.basePrice, stock: item.qty, minStock: 20, hubId: intakeForm.destinationHubId
                        });
                    }
                });
                setProducts(newProducts);
                setIsIntakeModalOpen(false);
                setIntakeCart([]);
            };

            return (
                <div className="min-h-screen bg-[#F8FAFC] text-slate-900 font-sans flex">
                    <nav className="fixed top-0 left-0 h-full w-64 bg-white border-r border-slate-200 p-6 hidden md:block z-20 shadow-sm">
                        <div className="flex items-center gap-2 mb-10 text-indigo-600">
                            <div className="p-2 bg-indigo-600 text-white rounded-lg"><Icons.Boxes /></div>
                            <h1 className="text-xl font-black tracking-tighter text-slate-800">MEDLOG</h1>
                        </div>
                        <div className="space-y-1.5">
                            <NavButton active={view === 'dashboard'} onClick={() => setView('dashboard')} icon={<Icons.LayoutGrid />} label="Overview" />
                            <div className="pt-4 pb-2 px-4 text-[10px] font-black uppercase tracking-widest text-slate-400">Inventory</div>
                            <NavButton active={view === 'master'} onClick={() => setView('master')} icon={<Icons.Database />} label="Material Master" />
                            <NavButton active={view === 'inventory'} onClick={() => setView('inventory')} icon={<Icons.Package />} label="Stock Ledger" />
                            <div className="pt-4 pb-2 px-4 text-[10px] font-black uppercase tracking-widest text-slate-400">Operations</div>
                            <NavButton active={view === 'intake'} onClick={() => setView('intake')} icon={<Icons.ArrowDownCircle />} label="Inward Entry" color="text-emerald-600" />
                            <NavButton active={view === 'release'} onClick={() => setView('release')} icon={<Icons.ExternalLink />} label="Outward Entry" color="text-orange-600" />
                            <div className="pt-4 pb-2 px-4 text-[10px] font-black uppercase tracking-widest text-slate-400">Admin</div>
                            <NavButton active={view === 'hubs'} onClick={() => setView('hubs')} icon={<Icons.Building2 />} label="Hub Master" />
                        </div>
                    </nav>

                    <main className="md:ml-64 flex-1 p-8 pb-32">
                        <header className="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-10">
                            <div>
                                <h2 className="text-3xl font-black text-slate-900 capitalize tracking-tight">{view}</h2>
                                <p className="text-slate-500 text-sm font-medium">Enterprise Healthcare Logistics Management</p>
                            </div>
                            <div className="flex items-center gap-3">
                                <div className="relative group">
                                    <Icons.Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" size={18} />
                                    <input type="text" placeholder="Search..." className="pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl w-64 text-sm font-medium shadow-sm outline-none focus:ring-2 focus:ring-indigo-500" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />
                                </div>
                            </div>
                        </header>

                        {view === 'dashboard' && (
                            <div className="space-y-8">
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <StatCard title="Global Inventory" value={stats.totalItems.toLocaleString()} icon={<Icons.Package size={24} className="text-blue-500" />} />
                                    <StatCard title="Active Hubs" value={hubs.length} icon={<Icons.Building2 size={24} className="text-indigo-500" />} />
                                    <StatCard title="Low Stock Alerts" value={stats.lowStockItems} icon={<Icons.AlertTriangle size={24} className="text-rose-500" />} highlight={stats.lowStockItems > 0} />
                                </div>
                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                                    <ActionCard title="Material Inward" desc="Record vendor arrivals & GRN" icon={<Icons.ArrowDownCircle size={28}/>} color="emerald" onClick={() => { setView('intake'); setIsIntakeModalOpen(true); }} />
                                    <ActionCard title="Material Outward" desc="Dispatch to camps & clinics" icon={<Icons.ExternalLink size={28}/>} color="orange" onClick={() => { setView('release'); setIsReleaseModalOpen(true); }} />
                                </div>
                            </div>
                        )}

                        {(view === 'inventory' || view === 'intake' || view === 'release') && (
                            <div className="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
                                <div className="p-6 border-b border-slate-100 flex justify-between items-center">
                                    <select className="bg-slate-50 border border-slate-200 text-sm font-bold rounded-xl px-4 py-2" value={selectedHubFilter} onChange={(e) => setSelectedHubFilter(e.target.value)}>
                                        <option value="all">Consolidated Network</option>
                                        {hubs.map(h => <option key={h.id} value={h.id}>{h.name}</option>)}
                                    </select>
                                    <div className="flex gap-2">
                                        {view === 'intake' && <button onClick={() => setIsIntakeModalOpen(true)} className="bg-emerald-600 text-white px-5 py-2.5 rounded-xl font-bold text-sm">New Inward</button>}
                                        {view === 'release' && <button onClick={() => setIsReleaseModalOpen(true)} className="bg-orange-600 text-white px-5 py-2.5 rounded-xl font-bold text-sm">New Outward</button>}
                                    </div>
                                </div>
                                <table className="w-full text-left">
                                    <thead className="bg-slate-50/50 text-[10px] font-black uppercase text-slate-400 tracking-widest">
                                        <tr><th className="px-8 py-5">Material</th><th className="px-8 py-5">Hub</th><th className="px-8 py-5">Stock</th><th className="px-8 py-5">Status</th></tr>
                                    </thead>
                                    <tbody className="divide-y divide-slate-50">
                                        {filteredItems.map((item) => (
                                            <tr key={item.id} className="hover:bg-slate-50 transition-all">
                                                <td className="px-8 py-5 font-bold">{item.name}</td>
                                                <td className="px-8 py-5 text-slate-500">{hubs.find(h => h.id === item.hubId)?.name}</td>
                                                <td className="px-8 py-5 font-black text-lg">{item.stock}</td>
                                                <td className="px-8 py-5">
                                                    <span className={`px-3 py-1 text-[10px] font-black rounded-full uppercase ${item.stock <= item.minStock ? 'bg-rose-50 text-rose-600' : 'bg-emerald-50 text-emerald-600'}`}>
                                                        {item.stock <= item.minStock ? 'Critical' : 'Healthy'}
                                                    </span>
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>
                        )}

                        {view === 'hubs' && (
                             <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {hubs.map((hub) => (
                                    <div key={hub.id} className="bg-white border border-slate-200 rounded-3xl p-6 shadow-sm">
                                        <div className="p-3 bg-indigo-50 text-indigo-600 rounded-2xl w-fit mb-4"><Icons.Building2 size={24}/></div>
                                        <h4 className="text-xl font-bold">{hub.name}</h4>
                                        <p className="text-slate-500 text-sm mb-6">{hub.location}</p>
                                        <div className="w-full bg-slate-100 h-2 rounded-full overflow-hidden">
                                            <div className="bg-indigo-500 h-full" style={{ width: hub.capacity }}></div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </main>

                    {isIntakeModalOpen && (
                        <Modal title="Material Inward" onClose={() => setIsIntakeModalOpen(false)} onCommit={submitIntake} isValid={intakeCart.length > 0}>
                            <div className="space-y-4">
                                <div className="grid grid-cols-2 gap-4">
                                    <input className="border p-3 rounded-xl w-full" placeholder="Invoice No" value={intakeForm.invoiceNo} onChange={e => setIntakeForm({...intakeForm, invoiceNo: e.target.value})} />
                                    <input className="border p-3 rounded-xl w-full" placeholder="Vendor" value={intakeForm.vendorId} onChange={e => setIntakeForm({...intakeForm, vendorId: e.target.value})} />
                                </div>
                                <div className="flex gap-2">
                                    <select className="flex-1 border p-3 rounded-xl" value={tempIntakeItem.masterId} onChange={e => setTempIntakeItem({...tempIntakeItem, masterId: e.target.value})}>
                                        <option value="">Select Material...</option>
                                        {masterItems.map(m => <option key={m.id} value={m.id}>{m.name}</option>)}
                                    </select>
                                    <input type="number" className="w-24 border p-3 rounded-xl" value={tempIntakeItem.qty} onChange={e => setTempIntakeItem({...tempIntakeItem, qty: e.target.value})} />
                                    <button onClick={() => {
                                        const master = masterItems.find(m => m.id === tempIntakeItem.masterId);
                                        if (master) setIntakeCart([...intakeCart, { ...master, qty: parseInt(tempIntakeItem.qty) || 1 }]);
                                    }} className="bg-slate-900 text-white px-4 rounded-xl font-bold">Add</button>
                                </div>
                                <div className="max-h-40 overflow-auto space-y-2">
                                    {intakeCart.map((it, i) => <div key={i} className="flex justify-between bg-slate-50 p-3 rounded-lg font-bold"><span>{it.name}</span><span>{it.qty}</span></div>)}
                                </div>
                            </div>
                        </Modal>
                    )}
                </div>
            );
        };

        const NavButton = ({ active, onClick, icon, label, color }) => (
            <button onClick={onClick} className={`w-full flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all ${active ? 'bg-slate-900 text-white' : 'text-slate-500 hover:bg-slate-50 font-bold'}`}>
                <span className={active ? '' : color || 'text-slate-400'}>{icon}</span>
                <span className="text-[13px] font-black">{label}</span>
            </button>
        );

        const StatCard = ({ title, value, icon, highlight }) => (
            <div className={`p-6 rounded-3xl border bg-white shadow-sm ${highlight ? 'ring-2 ring-rose-500' : 'border-slate-200'}`}>
                <div className="flex items-center justify-between mb-4">
                    <span className="text-slate-400 font-black text-[10px] uppercase tracking-widest">{title}</span>
                    <div className="p-2.5 bg-slate-50 rounded-xl">{icon}</div>
                </div>
                <div className="text-3xl font-black">{value}</div>
            </div>
        );

        const ActionCard = ({ title, desc, icon, color, onClick }) => (
            <div onClick={onClick} className="p-8 bg-white border border-slate-200 rounded-[2rem] shadow-sm hover:shadow-xl cursor-pointer transition-all group">
                <div className={`w-12 h-12 bg-${color}-50 text-${color}-600 rounded-xl flex items-center justify-center mb-6`}>{icon}</div>
                <h3 className="text-2xl font-black mb-2">{title}</h3>
                <p className="text-slate-500 text-sm mb-8">{desc}</p>
                <div className={`text-${color}-600 font-bold text-sm flex items-center gap-2`}>PROCESS <Icons.ChevronRight size={16}/></div>
            </div>
        );

        const Modal = ({ title, children, onClose, onCommit, isValid }) => (
            <div className="fixed inset-0 modal-overlay z-[100] flex items-center justify-center p-6">
                <div className="bg-white w-full max-w-lg rounded-[2rem] overflow-hidden flex flex-col shadow-2xl">
                    <div className="p-6 border-b flex justify-between items-center bg-slate-50">
                        <h3 className="font-black uppercase text-sm tracking-widest text-slate-500">{title}</h3>
                        <button onClick={onClose} className="p-2 hover:bg-slate-200 rounded-full transition-colors"><Icons.X/></button>
                    </div>
                    <div className="p-8 flex-1">{children}</div>
                    <div className="p-6 border-t flex justify-end gap-3 bg-slate-50">
                        <button onClick={onClose} className="px-6 py-2 font-bold text-slate-500">Cancel</button>
                        <button onClick={onCommit} disabled={!isValid} className="bg-indigo-600 text-white px-8 py-2 rounded-xl font-bold disabled:opacity-50 shadow-lg shadow-indigo-200">Submit</button>
                    </div>
                </div>
            </div>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
